<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Assignment</title>
    <link rel="stylesheet" href="./css/weui.css">
</head>

<body>
    <!-- 
        十一班第一个作业 
        要求：找一个接口，用cors方式请求数据，传给前端=>ajax请求到的数据，渲染到页面（weui做界面）
    -->
    <div>
        <div class="weui-panel weui-panel_access">
            <div class="weui-panel__hd">图文组合列表</div>
            <div class="weui-panel__bd">
            </div>
            <div class="weui-panel__ft">
                <a href="javascript:void(0);" class="weui-cell weui-cell_access weui-cell_link">
                    <div class="weui-cell__bd">查看更多</div>
                    <span class="weui-cell__ft"></span>
                </a>
            </div>
        </div>
    </div>
</body>
<script src="./js/weui.min.js"></script>
<script src="./js/jquery.min.js"></script>
<script>
    (() => {
        //request
        $.ajax({
            type: 'get',
            url: 'http://localhost:0911',
            dataType: 'json',
            success: str => {
                News(str);
            }
        });
        //render
        function News(data) {
            let newsArr = data.data;
            let strNews = newsArr.map(item => {
                return `
                  <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg">
                    <div class="weui-media-box__hd">
                        <img class="weui-media-box__thumb"
                            src="${item.image_url}" >
                    </div>
                    <div class="weui-media-box__bd">
                        <h4 class="weui-media-box__title">${item.title}</h4>
                        <p class="weui-media-box__desc">${item.abstract}</p>
                    </div>
                </a> `;
            });
            $('.weui-panel__bd').html(strNews);
        }
    })();
</script>

</html>